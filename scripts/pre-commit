#!/bin/bash
# Pre-commit hook that runs tests, type check, and formatting
# Install: ln -sf ../../scripts/pre-commit .git/hooks/pre-commit

set -e

echo "Running pre-commit checks..."

# Format code
echo "ğŸ“ Running prettier..."
pnpm prettier --write . --loglevel warn

# Type check (Svelte) - only fail on errors, not warnings
echo "ğŸ” Running Svelte type check..."
pnpm check -- --fail-on-warnings false

# Type check (TypeScript)
echo "ğŸ” Running TypeScript check..."
pnpm tsc --noEmit

# Run tests
echo "ğŸ§ª Running tests..."
pnpm test

# Add formatted files to staging
git add -u

echo "âœ… All pre-commit checks passed!"
